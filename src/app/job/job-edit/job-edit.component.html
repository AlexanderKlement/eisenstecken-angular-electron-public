<app-toolbar [title]="title"></app-toolbar>
<div class="window-container">
  <form (ngSubmit)="onSubmit()" [formGroup]="jobGroup">
    <div fxLayout="column" fxLayoutAlign="space-around center">
      @if (!subMode) {
        <mat-checkbox class="form-control" [disabled]="!createMode" formControlName="minijob">
          Kleinstauftrag
        </mat-checkbox>
      }
      <br>
        <br>
          <mat-form-field appearance="fill">
            <mat-label>Name</mat-label>
            <input class="form-control" formControlName="name" matInput>
          </mat-form-field>
          @if (!subMode) {
            <mat-form-field appearance="fill">
              <mat-label>Zust√§ndig</mat-label>
              <mat-select formControlName="responsible_id">
                @for (user of users$ | async; track user) {
                  <mat-option [value]="user.id">
                    {{user.fullname}}
                  </mat-option>
                }
              </mat-select>
            </mat-form-field>
          }
          @if (!subMode) {
            <mat-form-field appearance="fill">
              <mat-label>Jahr</mat-label>
              <input class="form-control" [readonly]="!createMode" formControlName="year" type="number" matInput>
            </mat-form-field>
          }
          @if (!subMode) {
            <mat-form-field appearance="fill">
              <mat-label>Fertigstellung</mat-label>
              <input class="form-control" formControlName="completion" matInput>
            </mat-form-field>
          }

          @if (!subMode && !addressDeactivated) {
            <app-address-form [address]="getAddressGroup()"
            fxFlexFill></app-address-form>
          }
          <button [disabled]="submitted" mat-raised-button type="submit">Speichern</button>
        </div>
      </form>
    </div>
