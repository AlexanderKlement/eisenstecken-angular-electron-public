<app-toolbar [title]="title"></app-toolbar>
<div class="window-container">
  <form (ngSubmit)="onSubmit()" [formGroup]="supplierGroup">
    <div fxLayout="column" fxLayoutAlign="space-around center">
      <mat-form-field appearance="fill">
        <mat-label>Name</mat-label>
        <input class="form-control" formControlName="name" matInput>
      </mat-form-field>
      <div fxLayout="column" fxLayoutAlign="space-around center" formArrayName="contacts">
        <h3>Kontakte</h3>
        @for (contact of getContacts().controls; track contact; let i = $index) {
          <div [formGroupName]="i" fxLayout="row"
            fxLayoutAlign="space-around center">
            <mat-form-field appearance="fill">
              <mat-label>Name</mat-label>
              <input class="form-control" formControlName="name" matInput>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Nachname</mat-label>
              <input class="form-control" formControlName="lastname" matInput>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Telefon</mat-label>
              <input (keypress)="numberOnly($event)" class="form-control" formControlName="tel" matInput>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Mail</mat-label>
              <input class="form-control" formControlName="mail" matInput>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Notiz</mat-label>
              <input class="form-control" formControlName="note" matInput>
            </mat-form-field>
              <app-circle-icon-button class="position-delete" (click)="removeContactAt(i)" icon="delete" />
          </div>
        }
        <button type="button" mat-button
          (click)="addContact()">
          <mat-icon>add</mat-icon>
        </button>
      </div>
      <mat-form-field appearance="fill">
        <mat-label>Bestellung versenden an:</mat-label>
        <input class="form-control" formControlName="send_order_to" matInput>
      </mat-form-field>
      @if (languageOptions$ | async; as languageOptions) {
        <mat-form-field appearance="fill">
          <mat-label>Sprache</mat-label>
          <mat-select formControlName="language">
            @for (language of languageOptions; track language) {
              <mat-option [value]="language.code">
                {{language.name.translation_de}}
              </mat-option>
            }
          </mat-select>
        </mat-form-field>
      }
      <mat-checkbox [checked]="showInOrders" (change)="showInOrdersCheckBoxClicked()">In Bestell-Liste anzeigen
      </mat-checkbox>
      <app-address-form [address]="getAddressGroup()" fxFlexFill></app-address-form>
      <button [disabled]="submitted" mat-raised-button type="submit">Speichern</button>
    </div>
  </form>
</div>
